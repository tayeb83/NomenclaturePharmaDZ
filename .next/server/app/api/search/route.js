"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/search/route";
exports.ids = ["app/api/search/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=%2FUsers%2Ftmerabti%2FDocuments%2FDeveloppement%2Fpharmaveille%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftmerabti%2FDocuments%2FDeveloppement%2Fpharmaveille&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=%2FUsers%2Ftmerabti%2FDocuments%2FDeveloppement%2Fpharmaveille%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftmerabti%2FDocuments%2FDeveloppement%2Fpharmaveille&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_tmerabti_Documents_Developpement_pharmaveille_app_api_search_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/search/route.ts */ \"(rsc)/./app/api/search/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/search/route\",\n        pathname: \"/api/search\",\n        filename: \"route\",\n        bundlePath: \"app/api/search/route\"\n    },\n    resolvedPagePath: \"/Users/tmerabti/Documents/Developpement/pharmaveille/app/api/search/route.ts\",\n    nextConfigOutput,\n    userland: _Users_tmerabti_Documents_Developpement_pharmaveille_app_api_search_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/search/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzZWFyY2glMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnNlYXJjaCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnNlYXJjaCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRtZXJhYnRpJTJGRG9jdW1lbnRzJTJGRGV2ZWxvcHBlbWVudCUyRnBoYXJtYXZlaWxsZSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ0bWVyYWJ0aSUyRkRvY3VtZW50cyUyRkRldmVsb3BwZW1lbnQlMkZwaGFybWF2ZWlsbGUmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzRCO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGhhcm1hdmVpbGxlLWR6Lz81Yjg5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy90bWVyYWJ0aS9Eb2N1bWVudHMvRGV2ZWxvcHBlbWVudC9waGFybWF2ZWlsbGUvYXBwL2FwaS9zZWFyY2gvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3NlYXJjaC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3NlYXJjaFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc2VhcmNoL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3RtZXJhYnRpL0RvY3VtZW50cy9EZXZlbG9wcGVtZW50L3BoYXJtYXZlaWxsZS9hcHAvYXBpL3NlYXJjaC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc2VhcmNoL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=%2FUsers%2Ftmerabti%2FDocuments%2FDeveloppement%2Fpharmaveille%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftmerabti%2FDocuments%2FDeveloppement%2Fpharmaveille&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/search/route.ts":
/*!*********************************!*\
  !*** ./app/api/search/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_queries__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/queries */ \"(rsc)/./lib/queries.ts\");\n\n\nasync function GET(request) {\n    const { searchParams } = new URL(request.url);\n    const q = searchParams.get(\"q\") || \"\";\n    const scope = searchParams.get(\"scope\") || \"all\";\n    const limit = Math.min(parseInt(searchParams.get(\"limit\") || \"30\"), 50);\n    if (!q.trim() || q.length < 2) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            results: [],\n            count: 0\n        });\n    }\n    try {\n        const results = await (0,_lib_queries__WEBPACK_IMPORTED_MODULE_1__.searchMedicaments)(q, scope, limit);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            results,\n            count: results.length,\n            query: q,\n            scope\n        }, {\n            headers: {\n                \"Cache-Control\": \"public, s-maxage=60, stale-while-revalidate=120\"\n            }\n        });\n    } catch (err) {\n        console.error(\"Search error:\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Erreur serveur\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3NlYXJjaC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUQ7QUFDTjtBQUUxQyxlQUFlRSxJQUFJQyxPQUFvQjtJQUM1QyxNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlGLFFBQVFHLEdBQUc7SUFDNUMsTUFBTUMsSUFBSUgsYUFBYUksR0FBRyxDQUFDLFFBQVE7SUFDbkMsTUFBTUMsUUFBUUwsYUFBYUksR0FBRyxDQUFDLFlBQVk7SUFDM0MsTUFBTUUsUUFBUUMsS0FBS0MsR0FBRyxDQUFDQyxTQUFTVCxhQUFhSSxHQUFHLENBQUMsWUFBWSxPQUFPO0lBRXBFLElBQUksQ0FBQ0QsRUFBRU8sSUFBSSxNQUFNUCxFQUFFUSxNQUFNLEdBQUcsR0FBRztRQUM3QixPQUFPZixxREFBWUEsQ0FBQ2dCLElBQUksQ0FBQztZQUFFQyxTQUFTLEVBQUU7WUFBRUMsT0FBTztRQUFFO0lBQ25EO0lBRUEsSUFBSTtRQUNGLE1BQU1ELFVBQVUsTUFBTWhCLCtEQUFpQkEsQ0FBQ00sR0FBR0UsT0FBT0M7UUFDbEQsT0FBT1YscURBQVlBLENBQUNnQixJQUFJLENBQUM7WUFBRUM7WUFBU0MsT0FBT0QsUUFBUUYsTUFBTTtZQUFFSSxPQUFPWjtZQUFHRTtRQUFNLEdBQUc7WUFDNUVXLFNBQVM7Z0JBQUUsaUJBQWlCO1lBQWtEO1FBQ2hGO0lBQ0YsRUFBRSxPQUFPQyxLQUFVO1FBQ2pCQyxRQUFRQyxLQUFLLENBQUMsaUJBQWlCRjtRQUMvQixPQUFPckIscURBQVlBLENBQUNnQixJQUFJLENBQUM7WUFBRU8sT0FBTztRQUFpQixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUN0RTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGhhcm1hdmVpbGxlLWR6Ly4vYXBwL2FwaS9zZWFyY2gvcm91dGUudHM/NzgzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBzZWFyY2hNZWRpY2FtZW50cyB9IGZyb20gJ0AvbGliL3F1ZXJpZXMnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXG4gIGNvbnN0IHEgPSBzZWFyY2hQYXJhbXMuZ2V0KCdxJykgfHwgJydcbiAgY29uc3Qgc2NvcGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzY29wZScpIHx8ICdhbGwnXG4gIGNvbnN0IGxpbWl0ID0gTWF0aC5taW4ocGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSB8fCAnMzAnKSwgNTApXG5cbiAgaWYgKCFxLnRyaW0oKSB8fCBxLmxlbmd0aCA8IDIpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyByZXN1bHRzOiBbXSwgY291bnQ6IDAgfSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHNlYXJjaE1lZGljYW1lbnRzKHEsIHNjb3BlLCBsaW1pdClcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyByZXN1bHRzLCBjb3VudDogcmVzdWx0cy5sZW5ndGgsIHF1ZXJ5OiBxLCBzY29wZSB9LCB7XG4gICAgICBoZWFkZXJzOiB7ICdDYWNoZS1Db250cm9sJzogJ3B1YmxpYywgcy1tYXhhZ2U9NjAsIHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9MTIwJyB9XG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTZWFyY2ggZXJyb3I6JywgZXJyKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRXJyZXVyIHNlcnZldXInIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInNlYXJjaE1lZGljYW1lbnRzIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInEiLCJnZXQiLCJzY29wZSIsImxpbWl0IiwiTWF0aCIsIm1pbiIsInBhcnNlSW50IiwidHJpbSIsImxlbmd0aCIsImpzb24iLCJyZXN1bHRzIiwiY291bnQiLCJxdWVyeSIsImhlYWRlcnMiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/search/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pool: () => (/* binding */ pool),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   queryOne: () => (/* binding */ queryOne)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * PharmaVeille DZ — Client PostgreSQL direct (sans Supabase)\n * Fonctionne en local et sur n'importe quel hébergeur PostgreSQL\n * (Railway, Render, Neon, ElephantSQL, Heroku, etc.)\n */ \n// Pool de connexions — réutilisé entre les requêtes en dev et prod\nconst globalForPg = globalThis;\nfunction createPool() {\n    return new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n        connectionString: process.env.DATABASE_URL,\n        // Fallback si tu préfères des variables séparées\n        host: process.env.PGHOST || \"localhost\",\n        port: parseInt(process.env.PGPORT || \"5432\"),\n        database: process.env.PGDATABASE || \"pharmaveille\",\n        user: process.env.PGUSER || \"postgres\",\n        password: process.env.PGPASSWORD || \"\",\n        ssl: process.env.DATABASE_SSL === \"true\" ? {\n            rejectUnauthorized: false\n        } : false,\n        // Retourner les dates comme strings (pas comme objets Date JS)\n        types: {\n            getTypeParser: (oid, format)=>{\n                // 1082=date, 1114=timestamp, 1184=timestamptz\n                if (oid === 1082 || oid === 1114 || oid === 1184) {\n                    return (val)=>val // garder comme string\n                    ;\n                }\n                const { types } = __webpack_require__(/*! pg */ \"pg\");\n                return types.getTypeParser(oid, format);\n            }\n        },\n        max: 10,\n        idleTimeoutMillis: 30000,\n        connectionTimeoutMillis: 5000\n    });\n}\n// En dev, Next.js recharge les modules → on réutilise le pool existant\nconst pool = globalForPg._pgPool ?? createPool();\nif (true) globalForPg._pgPool = pool;\n// Helper typé pour les requêtes\nasync function query(text, params) {\n    const client = await pool.connect();\n    try {\n        const result = await client.query(text, params);\n        return result.rows;\n    } finally{\n        client.release();\n    }\n}\n// Helper pour une seule ligne (retourne null si introuvable)\nasync function queryOne(text, params) {\n    const rows = await query(text, params);\n    return rows[0] ?? null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztDQUlDLEdBRTBDO0FBRTNDLG1FQUFtRTtBQUNuRSxNQUFNQyxjQUFjQztBQUVwQixTQUFTQztJQUNQLE9BQU8sSUFBSUgsb0NBQUlBLENBQUM7UUFDZEksa0JBQWtCQyxRQUFRQyxHQUFHLENBQUNDLFlBQVk7UUFDMUMsaURBQWlEO1FBQ2pEQyxNQUFVSCxRQUFRQyxHQUFHLENBQUNHLE1BQU0sSUFBUTtRQUNwQ0MsTUFBVUMsU0FBU04sUUFBUUMsR0FBRyxDQUFDTSxNQUFNLElBQUk7UUFDekNDLFVBQVVSLFFBQVFDLEdBQUcsQ0FBQ1EsVUFBVSxJQUFJO1FBQ3BDQyxNQUFVVixRQUFRQyxHQUFHLENBQUNVLE1BQU0sSUFBUTtRQUNwQ0MsVUFBVVosUUFBUUMsR0FBRyxDQUFDWSxVQUFVLElBQUk7UUFDcENDLEtBQUtkLFFBQVFDLEdBQUcsQ0FBQ2MsWUFBWSxLQUFLLFNBQzlCO1lBQUVDLG9CQUFvQjtRQUFNLElBQzVCO1FBQ0osK0RBQStEO1FBQy9EQyxPQUFPO1lBQ0xDLGVBQWUsQ0FBQ0MsS0FBYUM7Z0JBQzNCLDhDQUE4QztnQkFDOUMsSUFBSUQsUUFBUSxRQUFRQSxRQUFRLFFBQVFBLFFBQVEsTUFBTTtvQkFDaEQsT0FBTyxDQUFDRSxNQUFnQkEsSUFBSyxzQkFBc0I7O2dCQUNyRDtnQkFDQSxNQUFNLEVBQUVKLEtBQUssRUFBRSxHQUFHSyxtQkFBT0EsQ0FBQztnQkFDMUIsT0FBT0wsTUFBTUMsYUFBYSxDQUFDQyxLQUFLQztZQUNsQztRQUNGO1FBQ0FHLEtBQUs7UUFDTEMsbUJBQW1CO1FBQ25CQyx5QkFBeUI7SUFDM0I7QUFDRjtBQUVBLHVFQUF1RTtBQUNoRSxNQUFNQyxPQUFPOUIsWUFBWStCLE9BQU8sSUFBSTdCLGFBQVk7QUFDdkQsSUFBSUUsSUFBeUIsRUFBY0osWUFBWStCLE9BQU8sR0FBR0Q7QUFFakUsZ0NBQWdDO0FBQ3pCLGVBQWVFLE1BQ3BCQyxJQUFZLEVBQ1pDLE1BQWM7SUFFZCxNQUFNQyxTQUFTLE1BQU1MLEtBQUtNLE9BQU87SUFDakMsSUFBSTtRQUNGLE1BQU1DLFNBQXlCLE1BQU1GLE9BQU9ILEtBQUssQ0FBQ0MsTUFBTUM7UUFDeEQsT0FBT0csT0FBT0MsSUFBSTtJQUNwQixTQUFVO1FBQ1JILE9BQU9JLE9BQU87SUFDaEI7QUFDRjtBQUVBLDZEQUE2RDtBQUN0RCxlQUFlQyxTQUNwQlAsSUFBWSxFQUNaQyxNQUFjO0lBRWQsTUFBTUksT0FBTyxNQUFNTixNQUFTQyxNQUFNQztJQUNsQyxPQUFPSSxJQUFJLENBQUMsRUFBRSxJQUFJO0FBQ3BCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGhhcm1hdmVpbGxlLWR6Ly4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQaGFybWFWZWlsbGUgRFog4oCUIENsaWVudCBQb3N0Z3JlU1FMIGRpcmVjdCAoc2FucyBTdXBhYmFzZSlcbiAqIEZvbmN0aW9ubmUgZW4gbG9jYWwgZXQgc3VyIG4naW1wb3J0ZSBxdWVsIGjDqWJlcmdldXIgUG9zdGdyZVNRTFxuICogKFJhaWx3YXksIFJlbmRlciwgTmVvbiwgRWxlcGhhbnRTUUwsIEhlcm9rdSwgZXRjLilcbiAqL1xuXG5pbXBvcnQgeyBQb29sLCB0eXBlIFF1ZXJ5UmVzdWx0IH0gZnJvbSAncGcnXG5cbi8vIFBvb2wgZGUgY29ubmV4aW9ucyDigJQgcsOpdXRpbGlzw6kgZW50cmUgbGVzIHJlcXXDqnRlcyBlbiBkZXYgZXQgcHJvZFxuY29uc3QgZ2xvYmFsRm9yUGcgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMgeyBfcGdQb29sPzogUG9vbCB9XG5cbmZ1bmN0aW9uIGNyZWF0ZVBvb2woKSB7XG4gIHJldHVybiBuZXcgUG9vbCh7XG4gICAgY29ubmVjdGlvblN0cmluZzogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMLFxuICAgIC8vIEZhbGxiYWNrIHNpIHR1IHByw6lmw6hyZXMgZGVzIHZhcmlhYmxlcyBzw6lwYXLDqWVzXG4gICAgaG9zdDogICAgIHByb2Nlc3MuZW52LlBHSE9TVCAgICAgfHwgJ2xvY2FsaG9zdCcsXG4gICAgcG9ydDogICAgIHBhcnNlSW50KHByb2Nlc3MuZW52LlBHUE9SVCB8fCAnNTQzMicpLFxuICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5QR0RBVEFCQVNFIHx8ICdwaGFybWF2ZWlsbGUnLFxuICAgIHVzZXI6ICAgICBwcm9jZXNzLmVudi5QR1VTRVIgICAgIHx8ICdwb3N0Z3JlcycsXG4gICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LlBHUEFTU1dPUkQgfHwgJycsXG4gICAgc3NsOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9TU0wgPT09ICd0cnVlJ1xuICAgICAgPyB7IHJlamVjdFVuYXV0aG9yaXplZDogZmFsc2UgfVxuICAgICAgOiBmYWxzZSxcbiAgICAvLyBSZXRvdXJuZXIgbGVzIGRhdGVzIGNvbW1lIHN0cmluZ3MgKHBhcyBjb21tZSBvYmpldHMgRGF0ZSBKUylcbiAgICB0eXBlczoge1xuICAgICAgZ2V0VHlwZVBhcnNlcjogKG9pZDogbnVtYmVyLCBmb3JtYXQ6IHN0cmluZykgPT4ge1xuICAgICAgICAvLyAxMDgyPWRhdGUsIDExMTQ9dGltZXN0YW1wLCAxMTg0PXRpbWVzdGFtcHR6XG4gICAgICAgIGlmIChvaWQgPT09IDEwODIgfHwgb2lkID09PSAxMTE0IHx8IG9pZCA9PT0gMTE4NCkge1xuICAgICAgICAgIHJldHVybiAodmFsOiBzdHJpbmcpID0+IHZhbCAgLy8gZ2FyZGVyIGNvbW1lIHN0cmluZ1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgdHlwZXMgfSA9IHJlcXVpcmUoJ3BnJylcbiAgICAgICAgcmV0dXJuIHR5cGVzLmdldFR5cGVQYXJzZXIob2lkLCBmb3JtYXQpXG4gICAgICB9XG4gICAgfSxcbiAgICBtYXg6IDEwLFxuICAgIGlkbGVUaW1lb3V0TWlsbGlzOiAzMDAwMCxcbiAgICBjb25uZWN0aW9uVGltZW91dE1pbGxpczogNTAwMCxcbiAgfSlcbn1cblxuLy8gRW4gZGV2LCBOZXh0LmpzIHJlY2hhcmdlIGxlcyBtb2R1bGVzIOKGkiBvbiByw6l1dGlsaXNlIGxlIHBvb2wgZXhpc3RhbnRcbmV4cG9ydCBjb25zdCBwb29sID0gZ2xvYmFsRm9yUGcuX3BnUG9vbCA/PyBjcmVhdGVQb29sKClcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQZy5fcGdQb29sID0gcG9vbFxuXG4vLyBIZWxwZXIgdHlww6kgcG91ciBsZXMgcmVxdcOqdGVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVlcnk8VCA9IGFueT4oXG4gIHRleHQ6IHN0cmluZyxcbiAgcGFyYW1zPzogYW55W11cbik6IFByb21pc2U8VFtdPiB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0OiBRdWVyeVJlc3VsdDxUPiA9IGF3YWl0IGNsaWVudC5xdWVyeSh0ZXh0LCBwYXJhbXMpXG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzXG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LnJlbGVhc2UoKVxuICB9XG59XG5cbi8vIEhlbHBlciBwb3VyIHVuZSBzZXVsZSBsaWduZSAocmV0b3VybmUgbnVsbCBzaSBpbnRyb3V2YWJsZSlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeU9uZTxUID0gYW55PihcbiAgdGV4dDogc3RyaW5nLFxuICBwYXJhbXM/OiBhbnlbXVxuKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xuICBjb25zdCByb3dzID0gYXdhaXQgcXVlcnk8VD4odGV4dCwgcGFyYW1zKVxuICByZXR1cm4gcm93c1swXSA/PyBudWxsXG59XG5cbi8vIOKUgOKUgOKUgCBUeXBlcyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcbmV4cG9ydCB0eXBlIEVucmVnaXN0cmVtZW50ID0ge1xuICBpZDogbnVtYmVyXG4gIG5fZW5yZWc6IHN0cmluZ1xuICBjb2RlOiBzdHJpbmcgfCBudWxsXG4gIGRjaTogc3RyaW5nXG4gIG5vbV9tYXJxdWU6IHN0cmluZ1xuICBmb3JtZTogc3RyaW5nIHwgbnVsbFxuICBkb3NhZ2U6IHN0cmluZyB8IG51bGxcbiAgY29uZGl0aW9ubmVtZW50OiBzdHJpbmcgfCBudWxsXG4gIGxpc3RlOiBzdHJpbmcgfCBudWxsXG4gIHByZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbFxuICBsYWJvOiBzdHJpbmcgfCBudWxsXG4gIHBheXM6IHN0cmluZyB8IG51bGxcbiAgZGF0ZV9pbml0OiBzdHJpbmcgfCBudWxsXG4gIGRhdGVfZmluYWw6IHN0cmluZyB8IG51bGxcbiAgdHlwZV9wcm9kOiBzdHJpbmcgfCBudWxsXG4gIHN0YXR1dDogc3RyaW5nIHwgbnVsbFxuICBzdGFiaWxpdGU6IHN0cmluZyB8IG51bGxcbiAgYW5uZWU6IG51bWJlciB8IG51bGxcbn1cblxuZXhwb3J0IHR5cGUgUmV0cmFpdCA9IHtcbiAgaWQ6IG51bWJlclxuICBuX2VucmVnOiBzdHJpbmcgfCBudWxsXG4gIGRjaTogc3RyaW5nXG4gIG5vbV9tYXJxdWU6IHN0cmluZ1xuICBmb3JtZTogc3RyaW5nIHwgbnVsbFxuICBkb3NhZ2U6IHN0cmluZyB8IG51bGxcbiAgbGFibzogc3RyaW5nIHwgbnVsbFxuICBwYXlzOiBzdHJpbmcgfCBudWxsXG4gIHR5cGVfcHJvZDogc3RyaW5nIHwgbnVsbFxuICBzdGF0dXQ6IHN0cmluZyB8IG51bGxcbiAgZGF0ZV9yZXRyYWl0OiBzdHJpbmcgfCBudWxsXG4gIG1vdGlmX3JldHJhaXQ6IHN0cmluZyB8IG51bGxcbn1cblxuZXhwb3J0IHR5cGUgTm9uUmVub3V2ZWxlID0ge1xuICBpZDogbnVtYmVyXG4gIG5fZW5yZWc6IHN0cmluZyB8IG51bGxcbiAgZGNpOiBzdHJpbmdcbiAgbm9tX21hcnF1ZTogc3RyaW5nXG4gIGZvcm1lOiBzdHJpbmcgfCBudWxsXG4gIGRvc2FnZTogc3RyaW5nIHwgbnVsbFxuICBsYWJvOiBzdHJpbmcgfCBudWxsXG4gIHBheXM6IHN0cmluZyB8IG51bGxcbiAgdHlwZV9wcm9kOiBzdHJpbmcgfCBudWxsXG4gIHN0YXR1dDogc3RyaW5nIHwgbnVsbFxuICBkYXRlX2ZpbmFsOiBzdHJpbmcgfCBudWxsXG59XG5cbmV4cG9ydCB0eXBlIFNlYXJjaFJlc3VsdCA9IHtcbiAgc291cmNlOiAnZW5yZWdpc3RyZW1lbnQnIHwgJ3JldHJhaXQnIHwgJ25vbl9yZW5vdXZlbGUnXG4gIGlkOiBudW1iZXJcbiAgbl9lbnJlZzogc3RyaW5nIHwgbnVsbFxuICBkY2k6IHN0cmluZ1xuICBub21fbWFycXVlOiBzdHJpbmdcbiAgZm9ybWU6IHN0cmluZyB8IG51bGxcbiAgZG9zYWdlOiBzdHJpbmcgfCBudWxsXG4gIGxhYm86IHN0cmluZyB8IG51bGxcbiAgcGF5czogc3RyaW5nIHwgbnVsbFxuICB0eXBlX3Byb2Q6IHN0cmluZyB8IG51bGxcbiAgc3RhdHV0OiBzdHJpbmcgfCBudWxsXG4gIGFubmVlOiBudW1iZXIgfCBudWxsXG4gIGRhdGVfcmV0cmFpdDogc3RyaW5nIHwgbnVsbFxuICBtb3RpZl9yZXRyYWl0OiBzdHJpbmcgfCBudWxsXG4gIGRhdGVfZmluYWw6IHN0cmluZyB8IG51bGxcbn1cblxuZXhwb3J0IHR5cGUgU3RhdHMgPSB7XG4gIHRvdGFsX2VucmVnaXN0cmVtZW50czogbnVtYmVyXG4gIGVucmVnXzIwMjU6IG51bWJlclxuICBlbnJlZ18yMDI0OiBudW1iZXJcbiAgdG90YWxfcmV0cmFpdHM6IG51bWJlclxuICB0b3RhbF9ub25fcmVub3V2ZWxlczogbnVtYmVyXG4gIGZhYnJpcXVlc19hbGdlcmllOiBudW1iZXJcbiAgZGNpX3VuaXF1ZXM6IG51bWJlclxuICBhYm9ubmVzX25ld3NsZXR0ZXI6IG51bWJlclxufVxuIl0sIm5hbWVzIjpbIlBvb2wiLCJnbG9iYWxGb3JQZyIsImdsb2JhbFRoaXMiLCJjcmVhdGVQb29sIiwiY29ubmVjdGlvblN0cmluZyIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJob3N0IiwiUEdIT1NUIiwicG9ydCIsInBhcnNlSW50IiwiUEdQT1JUIiwiZGF0YWJhc2UiLCJQR0RBVEFCQVNFIiwidXNlciIsIlBHVVNFUiIsInBhc3N3b3JkIiwiUEdQQVNTV09SRCIsInNzbCIsIkRBVEFCQVNFX1NTTCIsInJlamVjdFVuYXV0aG9yaXplZCIsInR5cGVzIiwiZ2V0VHlwZVBhcnNlciIsIm9pZCIsImZvcm1hdCIsInZhbCIsInJlcXVpcmUiLCJtYXgiLCJpZGxlVGltZW91dE1pbGxpcyIsImNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzIiwicG9vbCIsIl9wZ1Bvb2wiLCJxdWVyeSIsInRleHQiLCJwYXJhbXMiLCJjbGllbnQiLCJjb25uZWN0IiwicmVzdWx0Iiwicm93cyIsInJlbGVhc2UiLCJxdWVyeU9uZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/queries.ts":
/*!************************!*\
  !*** ./lib/queries.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addSubscriber: () => (/* binding */ addSubscriber),\n/* harmony export */   confirmSubscriber: () => (/* binding */ confirmSubscriber),\n/* harmony export */   getAllEnregistrements: () => (/* binding */ getAllEnregistrements),\n/* harmony export */   getConfirmedSubscribers: () => (/* binding */ getConfirmedSubscribers),\n/* harmony export */   getGeneriques: () => (/* binding */ getGeneriques),\n/* harmony export */   getLastRetraits: () => (/* binding */ getLastRetraits),\n/* harmony export */   getMotifStats: () => (/* binding */ getMotifStats),\n/* harmony export */   getNonRenouveles: () => (/* binding */ getNonRenouveles),\n/* harmony export */   getRecentEnregistrements: () => (/* binding */ getRecentEnregistrements),\n/* harmony export */   getRetraits: () => (/* binding */ getRetraits),\n/* harmony export */   getStats: () => (/* binding */ getStats),\n/* harmony export */   getStatsByYear: () => (/* binding */ getStatsByYear),\n/* harmony export */   searchMedicaments: () => (/* binding */ searchMedicaments),\n/* harmony export */   unsubscribeByToken: () => (/* binding */ unsubscribeByToken)\n/* harmony export */ });\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db */ \"(rsc)/./lib/db.ts\");\n/**\n * Toutes les requêtes DB centralisées ici\n * Les pages importent depuis ce fichier, pas depuis lib/db.ts directement\n */ \n// ─── STATS ────────────────────────────────────────────────────\nasync function getStats() {\n    const row = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.queryOne)(`SELECT * FROM v_stats`);\n    return row ?? {\n        total_enregistrements: 0,\n        enreg_2025: 0,\n        enreg_2024: 0,\n        total_retraits: 0,\n        total_non_renouveles: 0,\n        fabriques_algerie: 0,\n        dci_uniques: 0,\n        abonnes_newsletter: 0\n    };\n}\n// ─── RECHERCHE FULLTEXT ───────────────────────────────────────\nasync function searchMedicaments(q, scope = \"all\", limit = 40) {\n    if (!q.trim()) return [];\n    // Construire la condition selon le scope\n    const scopeConditions = {\n        enregistrement: `AND source = 'enregistrement'`,\n        retrait: `AND source = 'retrait'`,\n        non_renouvele: `AND source = 'non_renouvele'`,\n        all: \"\"\n    };\n    const scopeFilter = scopeConditions[scope] ?? \"\";\n    const results = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT * FROM (\n      SELECT\n        'enregistrement' AS source,\n        id, n_enreg, dci, nom_marque, forme, dosage, labo, pays,\n        type_prod, statut, annee,\n        NULL::DATE AS date_retrait,\n        NULL::TEXT AS motif_retrait,\n        date_final\n      FROM enregistrements\n      WHERE dci ILIKE $1 OR nom_marque ILIKE $1\n\n      UNION ALL\n\n      SELECT\n        'retrait' AS source,\n        id, n_enreg, dci, nom_marque, forme, dosage, labo, pays,\n        type_prod, statut, NULL::SMALLINT AS annee,\n        date_retrait, motif_retrait,\n        NULL::DATE AS date_final\n      FROM retraits\n      WHERE dci ILIKE $1 OR nom_marque ILIKE $1\n\n      UNION ALL\n\n      SELECT\n        'non_renouvele' AS source,\n        id, n_enreg, dci, nom_marque, forme, dosage, labo, pays,\n        type_prod, statut, NULL::SMALLINT AS annee,\n        NULL::DATE AS date_retrait,\n        NULL::TEXT AS motif_retrait,\n        date_final\n      FROM non_renouveles\n      WHERE dci ILIKE $1 OR nom_marque ILIKE $1\n    ) AS combined\n    ${scopeFilter}\n    ORDER BY\n      CASE source WHEN 'enregistrement' THEN 1 WHEN 'retrait' THEN 2 ELSE 3 END,\n      nom_marque\n    LIMIT $2\n  `, [\n        `%${q}%`,\n        limit\n    ]);\n    return results;\n}\n// ─── ENREGISTREMENTS ──────────────────────────────────────────\nasync function getRecentEnregistrements(annee, limit = 6) {\n    return (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT * FROM enregistrements\n    WHERE annee = $1\n    ORDER BY date_init DESC NULLS LAST, id DESC\n    LIMIT $2\n  `, [\n        annee,\n        limit\n    ]);\n}\nasync function getAllEnregistrements(annee, limit = 50) {\n    return (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT * FROM enregistrements\n    WHERE annee = $1\n    ORDER BY date_init DESC NULLS LAST\n    LIMIT $2\n  `, [\n        annee,\n        limit\n    ]);\n}\nasync function getStatsByYear(annee) {\n    const types = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT type_prod, COUNT(*) as n\n    FROM enregistrements WHERE annee = $1\n    GROUP BY type_prod ORDER BY n DESC\n  `, [\n        annee\n    ]);\n    const statuts = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT statut, COUNT(*) as n\n    FROM enregistrements WHERE annee = $1\n    GROUP BY statut ORDER BY n DESC\n  `, [\n        annee\n    ]);\n    const topPays = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT pays, COUNT(*) as n\n    FROM enregistrements WHERE annee = $1 AND pays IS NOT NULL\n    GROUP BY pays ORDER BY n DESC LIMIT 5\n  `, [\n        annee\n    ]);\n    return {\n        types: Object.fromEntries(types.map((r)=>[\n                r.type_prod,\n                parseInt(r.n)\n            ])),\n        statuts: Object.fromEntries(statuts.map((r)=>[\n                r.statut,\n                parseInt(r.n)\n            ])),\n        topPays: topPays.map((r)=>[\n                r.pays,\n                parseInt(r.n)\n            ])\n    };\n}\n// ─── GÉNÉRIQUES (substitution) ────────────────────────────────\nasync function getGeneriques() {\n    const rows = await (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT dci, nom_marque, forme, dosage, labo, pays, type_prod, statut, annee,\n           COUNT(*) OVER (PARTITION BY dci) AS cnt\n    FROM enregistrements\n    WHERE type_prod IN ('GE', 'Gé')\n    ORDER BY dci, nom_marque\n  `);\n    // Grouper par DCI côté JS\n    const grouped = {};\n    for (const row of rows){\n        if (!grouped[row.dci]) grouped[row.dci] = {\n            dci: row.dci,\n            marques: [],\n            count: parseInt(row.cnt)\n        };\n        grouped[row.dci].marques.push(row);\n    }\n    return Object.values(grouped).filter((g)=>g.count > 1).sort((a, b)=>b.count - a.count).slice(0, 80);\n}\n// ─── RETRAITS ─────────────────────────────────────────────────\nasync function getRetraits(limit = 100) {\n    return (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT * FROM retraits\n    ORDER BY date_retrait DESC NULLS LAST, id DESC\n    LIMIT $1\n  `, [\n        limit\n    ]);\n}\nasync function getLastRetraits(limit = 3) {\n    return (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT * FROM retraits\n    WHERE date_retrait IS NOT NULL\n    ORDER BY date_retrait DESC\n    LIMIT $1\n  `, [\n        limit\n    ]);\n}\nasync function getMotifStats() {\n    return (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT\n      COALESCE(motif_retrait, 'Non précisé') AS motif,\n      COUNT(*) AS n\n    FROM retraits\n    GROUP BY motif_retrait\n    ORDER BY n DESC\n    LIMIT 8\n  `);\n}\n// ─── NON RENOUVELÉS ───────────────────────────────────────────\nasync function getNonRenouveles(limit = 50) {\n    return (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT * FROM non_renouveles\n    ORDER BY date_final DESC NULLS LAST\n    LIMIT $1\n  `, [\n        limit\n    ]);\n}\n// ─── NEWSLETTER ───────────────────────────────────────────────\nasync function addSubscriber(email, nom, confirmToken, unsubToken) {\n    return (0,_db__WEBPACK_IMPORTED_MODULE_0__.queryOne)(`\n    INSERT INTO newsletter_subscribers (email, nom, confirm_token, unsubscribe_token, confirmed)\n    VALUES ($1, $2, $3, $4, false)\n    ON CONFLICT (email) DO UPDATE SET\n      nom = EXCLUDED.nom,\n      confirm_token = EXCLUDED.confirm_token,\n      unsubscribe_token = EXCLUDED.unsubscribe_token\n    RETURNING *\n  `, [\n        email,\n        nom,\n        confirmToken,\n        unsubToken\n    ]);\n}\nasync function confirmSubscriber(token) {\n    return (0,_db__WEBPACK_IMPORTED_MODULE_0__.queryOne)(`\n    UPDATE newsletter_subscribers SET confirmed = true\n    WHERE confirm_token = $1\n    RETURNING email\n  `, [\n        token\n    ]);\n}\nasync function unsubscribeByToken(token) {\n    return (0,_db__WEBPACK_IMPORTED_MODULE_0__.queryOne)(`\n    DELETE FROM newsletter_subscribers\n    WHERE unsubscribe_token = $1\n    RETURNING email\n  `, [\n        token\n    ]);\n}\nasync function getConfirmedSubscribers() {\n    return (0,_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n    SELECT email, nom, unsubscribe_token\n    FROM newsletter_subscribers\n    WHERE confirmed = true\n  `);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7Ozs7RUFJakIsQ0FBQyxFQUFFO1FBQUNnRTtLQUFNO0FBQ1o7QUFFTyxlQUFlQyxtQkFBbUJELEtBQWE7SUFDcEQsT0FBT2hFLDZDQUFRQSxDQUFDLENBQUM7Ozs7RUFJakIsQ0FBQyxFQUFFO1FBQUNnRTtLQUFNO0FBQ1o7QUFFTyxlQUFlRTtJQUNwQixPQUFPbkUsMENBQUtBLENBQW1FLENBQUM7Ozs7RUFJaEYsQ0FBQztBQUNIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGhhcm1hdmVpbGxlLWR6Ly4vbGliL3F1ZXJpZXMudHM/OGE4MSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRvdXRlcyBsZXMgcmVxdcOqdGVzIERCIGNlbnRyYWxpc8OpZXMgaWNpXG4gKiBMZXMgcGFnZXMgaW1wb3J0ZW50IGRlcHVpcyBjZSBmaWNoaWVyLCBwYXMgZGVwdWlzIGxpYi9kYi50cyBkaXJlY3RlbWVudFxuICovXG5cbmltcG9ydCB7IHF1ZXJ5LCBxdWVyeU9uZSB9IGZyb20gJy4vZGInXG5pbXBvcnQgdHlwZSB7IEVucmVnaXN0cmVtZW50LCBSZXRyYWl0LCBOb25SZW5vdXZlbGUsIFNlYXJjaFJlc3VsdCwgU3RhdHMgfSBmcm9tICcuL2RiJ1xuXG4vLyDilIDilIDilIAgU1RBVFMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3RhdHMoKTogUHJvbWlzZTxTdGF0cz4ge1xuICBjb25zdCByb3cgPSBhd2FpdCBxdWVyeU9uZTxTdGF0cz4oYFNFTEVDVCAqIEZST00gdl9zdGF0c2ApXG4gIHJldHVybiByb3cgPz8ge1xuICAgIHRvdGFsX2VucmVnaXN0cmVtZW50czogMCwgZW5yZWdfMjAyNTogMCwgZW5yZWdfMjAyNDogMCxcbiAgICB0b3RhbF9yZXRyYWl0czogMCwgdG90YWxfbm9uX3Jlbm91dmVsZXM6IDAsXG4gICAgZmFicmlxdWVzX2FsZ2VyaWU6IDAsIGRjaV91bmlxdWVzOiAwLCBhYm9ubmVzX25ld3NsZXR0ZXI6IDAsXG4gIH1cbn1cblxuLy8g4pSA4pSA4pSAIFJFQ0hFUkNIRSBGVUxMVEVYVCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hNZWRpY2FtZW50cyhcbiAgcTogc3RyaW5nLFxuICBzY29wZTogc3RyaW5nID0gJ2FsbCcsXG4gIGxpbWl0OiBudW1iZXIgPSA0MFxuKTogUHJvbWlzZTxTZWFyY2hSZXN1bHRbXT4ge1xuICBpZiAoIXEudHJpbSgpKSByZXR1cm4gW11cblxuICAvLyBDb25zdHJ1aXJlIGxhIGNvbmRpdGlvbiBzZWxvbiBsZSBzY29wZVxuICBjb25zdCBzY29wZUNvbmRpdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgZW5yZWdpc3RyZW1lbnQ6IGBBTkQgc291cmNlID0gJ2VucmVnaXN0cmVtZW50J2AsXG4gICAgcmV0cmFpdDogICAgICAgIGBBTkQgc291cmNlID0gJ3JldHJhaXQnYCxcbiAgICBub25fcmVub3V2ZWxlOiAgYEFORCBzb3VyY2UgPSAnbm9uX3Jlbm91dmVsZSdgLFxuICAgIGFsbDogICAgICAgICAgICAnJyxcbiAgfVxuICBjb25zdCBzY29wZUZpbHRlciA9IHNjb3BlQ29uZGl0aW9uc1tzY29wZV0gPz8gJydcblxuICBjb25zdCByZXN1bHRzID0gYXdhaXQgcXVlcnk8U2VhcmNoUmVzdWx0PihgXG4gICAgU0VMRUNUICogRlJPTSAoXG4gICAgICBTRUxFQ1RcbiAgICAgICAgJ2VucmVnaXN0cmVtZW50JyBBUyBzb3VyY2UsXG4gICAgICAgIGlkLCBuX2VucmVnLCBkY2ksIG5vbV9tYXJxdWUsIGZvcm1lLCBkb3NhZ2UsIGxhYm8sIHBheXMsXG4gICAgICAgIHR5cGVfcHJvZCwgc3RhdHV0LCBhbm5lZSxcbiAgICAgICAgTlVMTDo6REFURSBBUyBkYXRlX3JldHJhaXQsXG4gICAgICAgIE5VTEw6OlRFWFQgQVMgbW90aWZfcmV0cmFpdCxcbiAgICAgICAgZGF0ZV9maW5hbFxuICAgICAgRlJPTSBlbnJlZ2lzdHJlbWVudHNcbiAgICAgIFdIRVJFIGRjaSBJTElLRSAkMSBPUiBub21fbWFycXVlIElMSUtFICQxXG5cbiAgICAgIFVOSU9OIEFMTFxuXG4gICAgICBTRUxFQ1RcbiAgICAgICAgJ3JldHJhaXQnIEFTIHNvdXJjZSxcbiAgICAgICAgaWQsIG5fZW5yZWcsIGRjaSwgbm9tX21hcnF1ZSwgZm9ybWUsIGRvc2FnZSwgbGFibywgcGF5cyxcbiAgICAgICAgdHlwZV9wcm9kLCBzdGF0dXQsIE5VTEw6OlNNQUxMSU5UIEFTIGFubmVlLFxuICAgICAgICBkYXRlX3JldHJhaXQsIG1vdGlmX3JldHJhaXQsXG4gICAgICAgIE5VTEw6OkRBVEUgQVMgZGF0ZV9maW5hbFxuICAgICAgRlJPTSByZXRyYWl0c1xuICAgICAgV0hFUkUgZGNpIElMSUtFICQxIE9SIG5vbV9tYXJxdWUgSUxJS0UgJDFcblxuICAgICAgVU5JT04gQUxMXG5cbiAgICAgIFNFTEVDVFxuICAgICAgICAnbm9uX3Jlbm91dmVsZScgQVMgc291cmNlLFxuICAgICAgICBpZCwgbl9lbnJlZywgZGNpLCBub21fbWFycXVlLCBmb3JtZSwgZG9zYWdlLCBsYWJvLCBwYXlzLFxuICAgICAgICB0eXBlX3Byb2QsIHN0YXR1dCwgTlVMTDo6U01BTExJTlQgQVMgYW5uZWUsXG4gICAgICAgIE5VTEw6OkRBVEUgQVMgZGF0ZV9yZXRyYWl0LFxuICAgICAgICBOVUxMOjpURVhUIEFTIG1vdGlmX3JldHJhaXQsXG4gICAgICAgIGRhdGVfZmluYWxcbiAgICAgIEZST00gbm9uX3Jlbm91dmVsZXNcbiAgICAgIFdIRVJFIGRjaSBJTElLRSAkMSBPUiBub21fbWFycXVlIElMSUtFICQxXG4gICAgKSBBUyBjb21iaW5lZFxuICAgICR7c2NvcGVGaWx0ZXJ9XG4gICAgT1JERVIgQllcbiAgICAgIENBU0Ugc291cmNlIFdIRU4gJ2VucmVnaXN0cmVtZW50JyBUSEVOIDEgV0hFTiAncmV0cmFpdCcgVEhFTiAyIEVMU0UgMyBFTkQsXG4gICAgICBub21fbWFycXVlXG4gICAgTElNSVQgJDJcbiAgYCwgW2AlJHtxfSVgLCBsaW1pdF0pXG5cbiAgcmV0dXJuIHJlc3VsdHNcbn1cblxuLy8g4pSA4pSA4pSAIEVOUkVHSVNUUkVNRU5UUyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZWNlbnRFbnJlZ2lzdHJlbWVudHMoYW5uZWU6IG51bWJlciwgbGltaXQgPSA2KTogUHJvbWlzZTxFbnJlZ2lzdHJlbWVudFtdPiB7XG4gIHJldHVybiBxdWVyeTxFbnJlZ2lzdHJlbWVudD4oYFxuICAgIFNFTEVDVCAqIEZST00gZW5yZWdpc3RyZW1lbnRzXG4gICAgV0hFUkUgYW5uZWUgPSAkMVxuICAgIE9SREVSIEJZIGRhdGVfaW5pdCBERVNDIE5VTExTIExBU1QsIGlkIERFU0NcbiAgICBMSU1JVCAkMlxuICBgLCBbYW5uZWUsIGxpbWl0XSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbEVucmVnaXN0cmVtZW50cyhhbm5lZTogbnVtYmVyLCBsaW1pdCA9IDUwKTogUHJvbWlzZTxFbnJlZ2lzdHJlbWVudFtdPiB7XG4gIHJldHVybiBxdWVyeTxFbnJlZ2lzdHJlbWVudD4oYFxuICAgIFNFTEVDVCAqIEZST00gZW5yZWdpc3RyZW1lbnRzXG4gICAgV0hFUkUgYW5uZWUgPSAkMVxuICAgIE9SREVSIEJZIGRhdGVfaW5pdCBERVNDIE5VTExTIExBU1RcbiAgICBMSU1JVCAkMlxuICBgLCBbYW5uZWUsIGxpbWl0XSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN0YXRzQnlZZWFyKGFubmVlOiBudW1iZXIpIHtcbiAgY29uc3QgdHlwZXMgPSBhd2FpdCBxdWVyeTx7IHR5cGVfcHJvZDogc3RyaW5nOyBuOiBzdHJpbmcgfT4oYFxuICAgIFNFTEVDVCB0eXBlX3Byb2QsIENPVU5UKCopIGFzIG5cbiAgICBGUk9NIGVucmVnaXN0cmVtZW50cyBXSEVSRSBhbm5lZSA9ICQxXG4gICAgR1JPVVAgQlkgdHlwZV9wcm9kIE9SREVSIEJZIG4gREVTQ1xuICBgLCBbYW5uZWVdKVxuXG4gIGNvbnN0IHN0YXR1dHMgPSBhd2FpdCBxdWVyeTx7IHN0YXR1dDogc3RyaW5nOyBuOiBzdHJpbmcgfT4oYFxuICAgIFNFTEVDVCBzdGF0dXQsIENPVU5UKCopIGFzIG5cbiAgICBGUk9NIGVucmVnaXN0cmVtZW50cyBXSEVSRSBhbm5lZSA9ICQxXG4gICAgR1JPVVAgQlkgc3RhdHV0IE9SREVSIEJZIG4gREVTQ1xuICBgLCBbYW5uZWVdKVxuXG4gIGNvbnN0IHRvcFBheXMgPSBhd2FpdCBxdWVyeTx7IHBheXM6IHN0cmluZzsgbjogc3RyaW5nIH0+KGBcbiAgICBTRUxFQ1QgcGF5cywgQ09VTlQoKikgYXMgblxuICAgIEZST00gZW5yZWdpc3RyZW1lbnRzIFdIRVJFIGFubmVlID0gJDEgQU5EIHBheXMgSVMgTk9UIE5VTExcbiAgICBHUk9VUCBCWSBwYXlzIE9SREVSIEJZIG4gREVTQyBMSU1JVCA1XG4gIGAsIFthbm5lZV0pXG5cbiAgcmV0dXJuIHtcbiAgICB0eXBlczogICBPYmplY3QuZnJvbUVudHJpZXModHlwZXMubWFwKHIgPT4gW3IudHlwZV9wcm9kLCBwYXJzZUludChyLm4pXSkpLFxuICAgIHN0YXR1dHM6IE9iamVjdC5mcm9tRW50cmllcyhzdGF0dXRzLm1hcChyID0+IFtyLnN0YXR1dCwgcGFyc2VJbnQoci5uKV0pKSxcbiAgICB0b3BQYXlzOiB0b3BQYXlzLm1hcChyID0+IFtyLnBheXMsIHBhcnNlSW50KHIubildIGFzIFtzdHJpbmcsIG51bWJlcl0pLFxuICB9XG59XG5cbi8vIOKUgOKUgOKUgCBHw4lOw4lSSVFVRVMgKHN1YnN0aXR1dGlvbikg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0R2VuZXJpcXVlcygpIHtcbiAgY29uc3Qgcm93cyA9IGF3YWl0IHF1ZXJ5PHtcbiAgICBkY2k6IHN0cmluZzsgbm9tX21hcnF1ZTogc3RyaW5nOyBmb3JtZTogc3RyaW5nOyBkb3NhZ2U6IHN0cmluZztcbiAgICBsYWJvOiBzdHJpbmc7IHBheXM6IHN0cmluZzsgdHlwZV9wcm9kOiBzdHJpbmc7IHN0YXR1dDogc3RyaW5nOyBhbm5lZTogbnVtYmVyOyBjbnQ6IHN0cmluZ1xuICB9PihgXG4gICAgU0VMRUNUIGRjaSwgbm9tX21hcnF1ZSwgZm9ybWUsIGRvc2FnZSwgbGFibywgcGF5cywgdHlwZV9wcm9kLCBzdGF0dXQsIGFubmVlLFxuICAgICAgICAgICBDT1VOVCgqKSBPVkVSIChQQVJUSVRJT04gQlkgZGNpKSBBUyBjbnRcbiAgICBGUk9NIGVucmVnaXN0cmVtZW50c1xuICAgIFdIRVJFIHR5cGVfcHJvZCBJTiAoJ0dFJywgJ0fDqScpXG4gICAgT1JERVIgQlkgZGNpLCBub21fbWFycXVlXG4gIGApXG5cbiAgLy8gR3JvdXBlciBwYXIgRENJIGPDtHTDqSBKU1xuICBjb25zdCBncm91cGVkOiBSZWNvcmQ8c3RyaW5nLCB7IGRjaTogc3RyaW5nOyBtYXJxdWVzOiB0eXBlb2Ygcm93czsgY291bnQ6IG51bWJlciB9PiA9IHt9XG4gIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcbiAgICBpZiAoIWdyb3VwZWRbcm93LmRjaV0pIGdyb3VwZWRbcm93LmRjaV0gPSB7IGRjaTogcm93LmRjaSwgbWFycXVlczogW10sIGNvdW50OiBwYXJzZUludChyb3cuY250KSB9XG4gICAgZ3JvdXBlZFtyb3cuZGNpXS5tYXJxdWVzLnB1c2gocm93KVxuICB9XG5cbiAgcmV0dXJuIE9iamVjdC52YWx1ZXMoZ3JvdXBlZClcbiAgICAuZmlsdGVyKGcgPT4gZy5jb3VudCA+IDEpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50KVxuICAgIC5zbGljZSgwLCA4MClcbn1cblxuLy8g4pSA4pSA4pSAIFJFVFJBSVRTIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJldHJhaXRzKGxpbWl0ID0gMTAwKTogUHJvbWlzZTxSZXRyYWl0W10+IHtcbiAgcmV0dXJuIHF1ZXJ5PFJldHJhaXQ+KGBcbiAgICBTRUxFQ1QgKiBGUk9NIHJldHJhaXRzXG4gICAgT1JERVIgQlkgZGF0ZV9yZXRyYWl0IERFU0MgTlVMTFMgTEFTVCwgaWQgREVTQ1xuICAgIExJTUlUICQxXG4gIGAsIFtsaW1pdF0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMYXN0UmV0cmFpdHMobGltaXQgPSAzKTogUHJvbWlzZTxSZXRyYWl0W10+IHtcbiAgcmV0dXJuIHF1ZXJ5PFJldHJhaXQ+KGBcbiAgICBTRUxFQ1QgKiBGUk9NIHJldHJhaXRzXG4gICAgV0hFUkUgZGF0ZV9yZXRyYWl0IElTIE5PVCBOVUxMXG4gICAgT1JERVIgQlkgZGF0ZV9yZXRyYWl0IERFU0NcbiAgICBMSU1JVCAkMVxuICBgLCBbbGltaXRdKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TW90aWZTdGF0cygpIHtcbiAgcmV0dXJuIHF1ZXJ5PHsgbW90aWY6IHN0cmluZzsgbjogc3RyaW5nIH0+KGBcbiAgICBTRUxFQ1RcbiAgICAgIENPQUxFU0NFKG1vdGlmX3JldHJhaXQsICdOb24gcHLDqWNpc8OpJykgQVMgbW90aWYsXG4gICAgICBDT1VOVCgqKSBBUyBuXG4gICAgRlJPTSByZXRyYWl0c1xuICAgIEdST1VQIEJZIG1vdGlmX3JldHJhaXRcbiAgICBPUkRFUiBCWSBuIERFU0NcbiAgICBMSU1JVCA4XG4gIGApXG59XG5cbi8vIOKUgOKUgOKUgCBOT04gUkVOT1VWRUzDiVMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Tm9uUmVub3V2ZWxlcyhsaW1pdCA9IDUwKTogUHJvbWlzZTxOb25SZW5vdXZlbGVbXT4ge1xuICByZXR1cm4gcXVlcnk8Tm9uUmVub3V2ZWxlPihgXG4gICAgU0VMRUNUICogRlJPTSBub25fcmVub3V2ZWxlc1xuICAgIE9SREVSIEJZIGRhdGVfZmluYWwgREVTQyBOVUxMUyBMQVNUXG4gICAgTElNSVQgJDFcbiAgYCwgW2xpbWl0XSlcbn1cblxuLy8g4pSA4pSA4pSAIE5FV1NMRVRURVIg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkU3Vic2NyaWJlcihlbWFpbDogc3RyaW5nLCBub206IHN0cmluZyB8IG51bGwsIGNvbmZpcm1Ub2tlbjogc3RyaW5nLCB1bnN1YlRva2VuOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHF1ZXJ5T25lKGBcbiAgICBJTlNFUlQgSU5UTyBuZXdzbGV0dGVyX3N1YnNjcmliZXJzIChlbWFpbCwgbm9tLCBjb25maXJtX3Rva2VuLCB1bnN1YnNjcmliZV90b2tlbiwgY29uZmlybWVkKVxuICAgIFZBTFVFUyAoJDEsICQyLCAkMywgJDQsIGZhbHNlKVxuICAgIE9OIENPTkZMSUNUIChlbWFpbCkgRE8gVVBEQVRFIFNFVFxuICAgICAgbm9tID0gRVhDTFVERUQubm9tLFxuICAgICAgY29uZmlybV90b2tlbiA9IEVYQ0xVREVELmNvbmZpcm1fdG9rZW4sXG4gICAgICB1bnN1YnNjcmliZV90b2tlbiA9IEVYQ0xVREVELnVuc3Vic2NyaWJlX3Rva2VuXG4gICAgUkVUVVJOSU5HICpcbiAgYCwgW2VtYWlsLCBub20sIGNvbmZpcm1Ub2tlbiwgdW5zdWJUb2tlbl0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maXJtU3Vic2NyaWJlcih0b2tlbjogc3RyaW5nKSB7XG4gIHJldHVybiBxdWVyeU9uZShgXG4gICAgVVBEQVRFIG5ld3NsZXR0ZXJfc3Vic2NyaWJlcnMgU0VUIGNvbmZpcm1lZCA9IHRydWVcbiAgICBXSEVSRSBjb25maXJtX3Rva2VuID0gJDFcbiAgICBSRVRVUk5JTkcgZW1haWxcbiAgYCwgW3Rva2VuXSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVuc3Vic2NyaWJlQnlUb2tlbih0b2tlbjogc3RyaW5nKSB7XG4gIHJldHVybiBxdWVyeU9uZShgXG4gICAgREVMRVRFIEZST00gbmV3c2xldHRlcl9zdWJzY3JpYmVyc1xuICAgIFdIRVJFIHVuc3Vic2NyaWJlX3Rva2VuID0gJDFcbiAgICBSRVRVUk5JTkcgZW1haWxcbiAgYCwgW3Rva2VuXSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbmZpcm1lZFN1YnNjcmliZXJzKCkge1xuICByZXR1cm4gcXVlcnk8eyBlbWFpbDogc3RyaW5nOyBub206IHN0cmluZyB8IG51bGw7IHVuc3Vic2NyaWJlX3Rva2VuOiBzdHJpbmcgfT4oYFxuICAgIFNFTEVDVCBlbWFpbCwgbm9tLCB1bnN1YnNjcmliZV90b2tlblxuICAgIEZST00gbmV3c2xldHRlcl9zdWJzY3JpYmVyc1xuICAgIFdIRVJFIGNvbmZpcm1lZCA9IHRydWVcbiAgYClcbn1cbiJdLCJuYW1lcyI6WyJxdWVyeSIsInF1ZXJ5T25lIiwiZ2V0U3RhdHMiLCJyb3ciLCJ0b3RhbF9lbnJlZ2lzdHJlbWVudHMiLCJlbnJlZ18yMDI1IiwiZW5yZWdfMjAyNCIsInRvdGFsX3JldHJhaXRzIiwidG90YWxfbm9uX3Jlbm91dmVsZXMiLCJmYWJyaXF1ZXNfYWxnZXJpZSIsImRjaV91bmlxdWVzIiwiYWJvbm5lc19uZXdzbGV0dGVyIiwic2VhcmNoTWVkaWNhbWVudHMiLCJxIiwic2NvcGUiLCJsaW1pdCIsInRyaW0iLCJzY29wZUNvbmRpdGlvbnMiLCJlbnJlZ2lzdHJlbWVudCIsInJldHJhaXQiLCJub25fcmVub3V2ZWxlIiwiYWxsIiwic2NvcGVGaWx0ZXIiLCJyZXN1bHRzIiwiZ2V0UmVjZW50RW5yZWdpc3RyZW1lbnRzIiwiYW5uZWUiLCJnZXRBbGxFbnJlZ2lzdHJlbWVudHMiLCJnZXRTdGF0c0J5WWVhciIsInR5cGVzIiwic3RhdHV0cyIsInRvcFBheXMiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsIm1hcCIsInIiLCJ0eXBlX3Byb2QiLCJwYXJzZUludCIsIm4iLCJzdGF0dXQiLCJwYXlzIiwiZ2V0R2VuZXJpcXVlcyIsInJvd3MiLCJncm91cGVkIiwiZGNpIiwibWFycXVlcyIsImNvdW50IiwiY250IiwicHVzaCIsInZhbHVlcyIsImZpbHRlciIsImciLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsImdldFJldHJhaXRzIiwiZ2V0TGFzdFJldHJhaXRzIiwiZ2V0TW90aWZTdGF0cyIsImdldE5vblJlbm91dmVsZXMiLCJhZGRTdWJzY3JpYmVyIiwiZW1haWwiLCJub20iLCJjb25maXJtVG9rZW4iLCJ1bnN1YlRva2VuIiwiY29uZmlybVN1YnNjcmliZXIiLCJ0b2tlbiIsInVuc3Vic2NyaWJlQnlUb2tlbiIsImdldENvbmZpcm1lZFN1YnNjcmliZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/queries.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsearch%2Froute&page=%2Fapi%2Fsearch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsearch%2Froute.ts&appDir=%2FUsers%2Ftmerabti%2FDocuments%2FDeveloppement%2Fpharmaveille%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftmerabti%2FDocuments%2FDeveloppement%2Fpharmaveille&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();